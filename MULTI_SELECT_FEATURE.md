# 多选抢课功能说明

## 功能概述

新增了多选抢课功能，允许用户同时选择多门课程进行批量抢课，大大提高了抢课效率。

## 主要特性

### 1. 多选模式
- 点击"多选模式"按钮进入多选状态
- 课程卡片左侧显示复选框
- 支持单选和全选操作

### 2. 批量操作
- **全选**: 选择当前筛选结果中的所有课程
- **清空选择**: 取消所有已选择的课程
- **批量抢课**: 同时抢多门已选择的课程

### 3. 智能分批处理
- 自动分批处理，每批最多3个并发请求
- 批次间延迟500ms，避免服务器压力
- 实时显示每门课程的抢课结果

### 4. 状态管理
- 实时显示已选择课程数量
- 选中课程高亮显示（绿色标题）
- 多选模式下隐藏单个抢课按钮

## 使用方法

### 步骤1: 进入多选模式
1. 在"课程信息"页面，点击"多选模式"按钮
2. 界面会显示多选相关的操作按钮和提示信息

### 步骤2: 选择课程
1. 直接点击课程卡片来选择/取消选择课程
2. 选中的课程会显示绿色边框和勾选标记
3. 使用"全选"按钮快速选择所有筛选结果
4. 使用"清空选择"按钮取消所有选择

### 步骤3: 批量抢课
1. 确认已选择要抢的课程
2. 点击"批量抢课"按钮
3. 系统会分批处理，显示每门课程的抢课结果
4. 完成后显示总结信息

## 技术实现

### 前端组件
- **CourseInfoPage**: 主页面组件，管理多选状态
- **CourseCard**: 课程卡片组件，支持复选框显示
- 状态管理：`multiSelectedCourses`, `isMultiSelectMode`, `isBatchGrabbing`

### API接口
- **POST /api/course-selection/batch**: 批量抢课接口
- 支持自定义批次大小和延迟时间
- 返回详细的抢课结果统计

### 核心功能
```typescript
// 多选状态管理
const [multiSelectedCourses, setMultiSelectedCourses] = useState<Set<string>>(new Set())
const [isMultiSelectMode, setIsMultiSelectMode] = useState(false)
const [isBatchGrabbing, setIsBatchGrabbing] = useState(false)

// 批量抢课API调用
const response = await courseAPI.executeBatchCourseSelection({
  courses: coursesToSelect,
  batchSize: 3,    // 每批最多3个并发请求
  delay: 500       // 批次间延迟500ms
})
```

## 性能优化

### 1. 并发控制
- 限制每批最多3个并发请求
- 避免对服务器造成过大压力

### 2. 延迟处理
- 批次间自动延迟500ms
- 平衡速度和服务器稳定性

### 3. 错误处理
- 单个课程失败不影响其他课程
- 详细的错误信息反馈

## 用户体验

### 1. 视觉反馈
- 选中课程显示绿色边框和背景
- 左侧显示圆形勾选指示器
- 选中课程标题变为绿色
- 实时显示已选择数量
- 加载状态和进度提示

### 2. 操作提示
- 多选模式启用时显示使用说明
- 清晰的操作步骤指导

### 3. 结果反馈
- 每门课程抢课结果实时显示
- 最终统计信息总结

## 注意事项

1. **网络稳定性**: 批量抢课需要稳定的网络连接
2. **服务器限制**: 避免同时选择过多课程，建议不超过10门
3. **Cookie有效性**: 确保Cookie未过期，否则会影响抢课成功率
4. **课程冲突**: 注意课程时间冲突，系统不会自动检查

## 更新日志

- **v1.0.0**: 初始版本，支持基本多选功能
- 添加多选状态管理
- 实现批量抢课API
- 优化用户界面和体验
- 添加操作提示和说明

## 未来计划

1. **智能冲突检测**: 自动检测课程时间冲突
2. **优先级设置**: 支持设置课程抢课优先级
3. **定时抢课**: 支持定时批量抢课
4. **抢课策略**: 支持不同的抢课策略选择
