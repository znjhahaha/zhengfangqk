# 多用户同时使用指南

## 🎯 功能概述

现在系统支持**多人同时使用**，每个用户使用独立的Cookie会话，互不干扰。Cookie不会上传到服务器，只在用户使用时临时传递，确保数据安全。

## ✨ 主要特性

### 1. 独立会话管理
- 每个用户拥有独立的会话ID
- Cookie存储在本地，不上传服务器
- 支持同时多个用户使用

### 2. 会话隔离
- 用户A的操作不会影响用户B
- 每个用户看到自己的课程信息
- 独立的选课状态和进度

### 3. 本地存储
- Cookie存储在浏览器localStorage中
- 会话信息本地管理
- 24小时自动清理过期会话

## 🚀 使用方法

### 创建新会话

1. **进入系统设置页面**
   - 点击"系统设置"标签
   - 找到"多用户会话管理"部分

2. **添加新Cookie**
   - 在输入框中粘贴您的Cookie
   - 点击"+"按钮创建新会话
   - 系统会自动验证Cookie有效性

3. **会话创建成功**
   - 显示学生姓名和基本信息
   - 会话自动设为当前活跃会话
   - 可以开始使用系统功能

### 管理多个会话

#### 查看会话列表
- 显示所有已创建的会话
- 显示学生姓名、学号、专业
- 显示最后活动时间
- 当前活跃会话会有"当前"标识

#### 切换会话
- 点击任意会话的"切换"按钮
- 系统立即切换到该用户的数据
- 所有页面显示该用户的信息

#### 验证会话
- 点击"验证"按钮检查Cookie是否有效
- 如果Cookie过期，会提示重新输入
- 验证成功会更新学生信息

#### 删除会话
- 点击"删除"按钮移除会话
- 如果删除当前会话，会自动切换到其他会话
- 删除后该用户的数据不再可用

## 🔧 技术实现

### 会话管理架构

```
用户浏览器
├── localStorage (存储会话信息)
├── UserSessionManager (会话管理器)
├── 会话A (用户1的Cookie)
├── 会话B (用户2的Cookie)
└── 会话C (用户3的Cookie)

服务器端
├── 会话存储 (临时，不持久化)
├── API路由 (支持会话ID参数)
└── 数据隔离 (按会话ID分离)
```

### 数据流程

1. **创建会话**
   ```
   用户输入Cookie → 验证有效性 → 创建会话ID → 存储到localStorage → 设为当前会话
   ```

2. **使用系统**
   ```
   用户操作 → 携带会话ID → API调用 → 使用对应Cookie → 返回用户数据
   ```

3. **切换会话**
   ```
   选择会话 → 更新当前会话ID → 重新加载数据 → 显示新用户信息
   ```

## 📱 多设备使用

### 同一用户多设备
- 每个设备需要单独创建会话
- 设备间会话不共享
- 可以在不同设备同时使用

### 不同用户多设备
- 完全独立，互不影响
- 每个用户使用自己的Cookie
- 支持无限用户同时使用

## 🔒 安全特性

### Cookie保护
- Cookie不上传到服务器永久存储
- 只在API调用时临时传递
- 24小时后自动清理过期会话

### 数据隔离
- 每个会话的数据完全隔离
- 用户A看不到用户B的信息
- 选课操作互不干扰

### 隐私保护
- 学生信息本地存储
- 服务器不保存用户数据
- 会话过期自动清理

## 🎮 使用场景

### 场景1：宿舍多人使用
- 室友A、B、C各自输入自己的Cookie
- 可以同时查看课程、选课
- 互不干扰，各自管理

### 场景2：家庭使用
- 兄弟姐妹各自使用
- 父母可以帮孩子选课
- 每个账号独立管理

### 场景3：公共设备
- 图书馆、机房等公共电脑
- 每个用户临时创建会话
- 使用完毕后删除会话

## ⚠️ 注意事项

### Cookie获取
- 需要从浏览器开发者工具获取
- 确保Cookie完整且有效
- 过期后需要重新获取

### 会话管理
- 定期验证会话有效性
- 及时删除不需要的会话
- 避免在公共设备保存会话

### 数据同步
- 每个会话的数据独立
- 切换会话后需要重新加载
- 建议使用前先验证会话

## 🆘 常见问题

### Q: 可以同时登录多少个用户？
A: 理论上没有限制，取决于设备性能和网络状况。

### Q: Cookie会保存到服务器吗？
A: 不会，Cookie只存储在本地浏览器中，服务器不永久保存。

### Q: 会话会过期吗？
A: 会话24小时未活动会自动清理，但Cookie本身的有效期取决于学校系统。

### Q: 可以跨设备使用同一会话吗？
A: 不可以，每个设备需要单独创建会话。

### Q: 删除会话后数据会丢失吗？
A: 会，删除会话后该用户的所有数据不再可用。

## 🎉 总结

多用户功能让系统真正实现了"一设备多用户"的使用模式，每个用户都可以独立使用系统，互不干扰。Cookie本地存储确保了数据安全，会话管理提供了灵活的用户体验。

现在您可以放心地将系统部署到互联网上，让多个用户同时使用，而不用担心数据冲突或安全问题！
